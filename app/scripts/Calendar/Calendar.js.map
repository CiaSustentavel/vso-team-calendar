{"version":3,"sources":["Calendar/Calendar.ts"],"names":["FullCalendarCallbackType","FullCalendarEventRenderingCallbackType","Calendar","Calendar.constructor","Calendar.initialize","Calendar.addEventSource","Calendar.addEventSources","Calendar.getViewQuery","Calendar.next","Calendar.prev","Calendar.showToday","Calendar.getFormattedDate","Calendar.renderEvent","Calendar.updateEvent","Calendar.setOption","Calendar.refreshEvents","Calendar.removeEvent","Calendar._viewRender","Calendar._createFilteredCallback","Calendar._createEventSource","Calendar.addCallback","Calendar._getComposedCallback","Calendar.addEvents","Calendar.removeEvents","Calendar.getDate"],"mappings":"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","file":"Calendar/Calendar.js","sourcesContent":["/// <reference path='../ref/VSS/VSS.d.ts' />\r\n/// <reference path='../ref/fullCalendar/fullCalendar.d.ts' />\r\n/// <reference path='../ref/moment/moment.d.ts' />\r\n/// <reference path='../ref/VSS/jquery.d.ts' />\r\n\r\nimport Calendar_ColorUtils = require(\"Calendar/Utils/Color\");\r\nimport Calendar_Contracts = require(\"Calendar/Contracts\");\r\nimport Calendar_Utils_Guid = require(\"Calendar/Utils/Guid\");\r\nimport Controls = require(\"VSS/Controls\");\r\nimport Q = require(\"q\");\r\nimport Utils_Core = require(\"VSS/Utils/Core\");\r\nimport Utils_Date = require(\"VSS/Utils/Date\");\r\nimport Utils_String = require(\"VSS/Utils/String\");\r\n\r\nexport interface CalendarOptions {\r\n    fullCalendarOptions: IDictionaryStringTo<any>;\r\n    viewRender: any;\r\n}\r\n\r\nexport interface SourceAndOptions {\r\n    source: Calendar_Contracts.IEventSource;\r\n    options?: FullCalendar.EventSourceOptions;\r\n    callbacks?: { [callbackType: number]: Function };\r\n}\r\n\r\nexport interface CalendarEventSource {\r\n\r\n    (source: Calendar_Contracts.IEventSource, options: FullCalendar.EventSourceOptions): void;\r\n\r\n    eventSource: Calendar_Contracts.IEventSource;\r\n    state?: CalendarEventSourceState;\r\n}\r\n\r\nexport interface CalendarEventSourceState {\r\n    dirty?: boolean;\r\n    cachedEvents?: FullCalendar.EventObject[];\r\n}\r\n\r\nexport enum FullCalendarCallbackType {\r\n    // General display events\r\n    viewRender,\r\n    viewDestroy,\r\n    dayRender,\r\n    windowResize,\r\n\r\n    // Clicking, hovering, selecting\r\n    dayClick,\r\n    eventClick,\r\n    eventMouseover,\r\n    eventMouseout,\r\n    select,\r\n    unselect,\r\n\r\n    // Event rendering events\r\n    eventRender,\r\n    eventAfterRender,\r\n    eventDestroy,\r\n    eventAfterAllRender,\r\n\r\n    // Dragging, dropping\r\n    eventDragStart,\r\n    eventDragStop,\r\n    eventDrop,\r\n    eventResizeStart,\r\n    eventResizeStop,\r\n    eventResize,\r\n    drop,\r\n    eventReceive\r\n}\r\n\r\nexport enum FullCalendarEventRenderingCallbackType {\r\n\r\n}\r\n\r\nexport class Calendar extends Controls.Control<CalendarOptions> {\r\n    private _callbacks: { [callbackType: number]: Function[] };\r\n    private _calendarSources: CalendarEventSource[];\r\n\r\n    constructor(options: CalendarOptions) {\r\n        super($.extend({ cssClass: \"vss-calendar\" }, options));\r\n        this._callbacks = {};\r\n        this._calendarSources = [];\r\n    }\r\n\r\n    public initialize() {\r\n        super.initialize();\r\n\r\n        //  Determine optimal aspect ratio\r\n        var aspectRatio = $('.leftPane').width() /($('.leftPane').height() - 85);\r\n        aspectRatio = parseFloat(aspectRatio.toFixed(1));\r\n\r\n        this._element.fullCalendar($.extend({\r\n            eventRender: this._getComposedCallback(FullCalendarCallbackType.eventRender),\r\n            eventAfterRender: this._getComposedCallback(FullCalendarCallbackType.eventAfterRender),\r\n            eventAfterAllRender: this._getComposedCallback(FullCalendarCallbackType.eventAfterAllRender),\r\n            eventDestroy: this._getComposedCallback(FullCalendarCallbackType.eventDestroy),\r\n            viewRender: (view: FullCalendar.View, element: JQuery) => this._viewRender(view, element),\r\n            viewDestroy: this._getComposedCallback(FullCalendarCallbackType.viewDestroy),\r\n            dayRender: this._getComposedCallback(FullCalendarCallbackType.dayRender),\r\n            windowResize: this._getComposedCallback(FullCalendarCallbackType.windowResize),\r\n            dayClick: this._getComposedCallback(FullCalendarCallbackType.dayClick),\r\n            eventClick: this._getComposedCallback(FullCalendarCallbackType.eventClick),\r\n            eventMouseover: this._getComposedCallback(FullCalendarCallbackType.eventMouseover),\r\n            eventMouseout: this._getComposedCallback(FullCalendarCallbackType.eventMouseout),\r\n            select: this._getComposedCallback(FullCalendarCallbackType.select),\r\n            unselect: this._getComposedCallback(FullCalendarCallbackType.unselect),\r\n            eventDragStart: this._getComposedCallback(FullCalendarCallbackType.eventDragStart),\r\n            eventDragStop: this._getComposedCallback(FullCalendarCallbackType.eventDragStop),\r\n            eventDrop: this._getComposedCallback(FullCalendarCallbackType.eventDrop),\r\n            eventResizeStart: this._getComposedCallback(FullCalendarCallbackType.eventResizeStart),\r\n            eventResizeStop: this._getComposedCallback(FullCalendarCallbackType.eventResizeStop),\r\n            eventResize: this._getComposedCallback(FullCalendarCallbackType.eventResize),\r\n            drop: this._getComposedCallback(FullCalendarCallbackType.drop),\r\n            eventReceive: this._getComposedCallback(FullCalendarCallbackType.eventReceive),\r\n            header: false,\r\n            aspectRatio: aspectRatio,\r\n            columnFormat: \"dddd\"\r\n        }, this._options.fullCalendarOptions));\r\n    }\r\n\r\n    public addEventSource(source: Calendar_Contracts.IEventSource, options?: FullCalendar.EventSourceOptions, callbacks?: { [callbackType: number]: Function }) {\r\n        this.addEventSources([{ source: source, options: options, callbacks: callbacks }]);\r\n    }\r\n\r\n    public addEventSources(sources: SourceAndOptions[]): CalendarEventSource[] {\r\n\r\n        sources.forEach((source) => {\r\n            var calendarSource = this._createEventSource(source.source, source.options || {});\r\n            this._calendarSources.push(calendarSource);\r\n            this._element.fullCalendar(\"addEventSource\", calendarSource);\r\n\r\n            if (source.callbacks) {\r\n                var callbackTypes = Object.keys(source.callbacks);\r\n                for (var i = 0; i < callbackTypes.length; ++i) {\r\n                    var callbackType: FullCalendarCallbackType = parseInt(callbackTypes[i]);\r\n                    if (callbackType === FullCalendarCallbackType.eventAfterAllRender) {\r\n                        // This callback doesn't make sense for individual events.\r\n                        continue;\r\n                    }\r\n                    this.addCallback(callbackType, this._createFilteredCallback(source.callbacks[callbackTypes[i]],(event) => event[\"eventType\"] === source.source.id));\r\n                }\r\n            }\r\n        });\r\n\r\n        this.refreshEvents();\r\n        return this._calendarSources;\r\n    }\r\n\r\n    public getViewQuery(): Calendar_Contracts.IEventQuery {\r\n        var view = this._element.fullCalendar(\"getView\");\r\n\r\n        return {\r\n            startDate: Utils_Date.shiftToUTC(new Date(view.start.valueOf())),\r\n            endDate: Utils_Date.shiftToUTC(new Date(view.end.valueOf()))\r\n        };\r\n    }\r\n\r\n\r\n    public next() : void {\r\n        this._element.fullCalendar(\"next\");\r\n    }\r\n\r\n    public prev() : void {\r\n        this._element.fullCalendar(\"prev\");\r\n    }\r\n\r\n    public showToday() : void {\r\n        this._element.fullCalendar(\"today\");\r\n    }\r\n\r\n    public getFormattedDate(format: string) : string{\r\n        var currentDate : any = this._element.fullCalendar(\"getDate\");\r\n        return currentDate.format(format);\r\n    }\r\n\r\n    public renderEvent(event: Calendar_Contracts.CalendarEvent, eventType: string) {\r\n        var end = Utils_Date.addDays(new Date(event.endDate.valueOf()), 1);\r\n        var calEvent: any  = {\r\n            id: event.eventId,\r\n            title: event.title,\r\n            allDay: true,\r\n            start: event.startDate,\r\n            end: end,\r\n            eventType: eventType,\r\n            category: event.category\r\n        };\r\n\r\n        if(eventType === 'daysOff'){\r\n            calEvent.member = event.member;\r\n            calEvent.title = event.member.displayName + \" Day Off\";\r\n        }\r\n\r\n        var color = Calendar_ColorUtils.generateColor((<string>event.category || \"uncategorized\").toLowerCase());\r\n        calEvent.backgroundColor = color;\r\n        calEvent.borderColor = color;\r\n\r\n        this._element.fullCalendar(\"renderEvent\", calEvent, false );\r\n    }\r\n\r\n     public updateEvent(event: FullCalendar.EventObject) {\r\n        var color = Calendar_ColorUtils.generateColor(((<any>event).category || \"uncategorized\").toLowerCase());\r\n        event.backgroundColor = color;\r\n        event.borderColor = color;\r\n\r\n        this._element.fullCalendar(\"updateEvent\", event);\r\n    }\r\n\r\n     public setOption(key: string, value: any) {\r\n        this._element.fullCalendar(\"option\", key, value);\r\n    }\r\n     \r\n    public refreshEvents(eventSource?: FullCalendar.EventSource) {\r\n        if (!eventSource) {\r\n            $('.sprint-label').remove();\r\n            this._element.fullCalendar(\"refetchEvents\");\r\n        }\r\n        else {\r\n            this._element.fullCalendar(\"removeEventSource\", eventSource);\r\n            this._element.fullCalendar(\"addEventSource\", eventSource);\r\n        }\r\n    }\r\n\r\n    public removeEvent(id: string) {\r\n        if(id){\r\n            this._element.fullCalendar(\"removeEvents\", id );\r\n        }\r\n    }\r\n    private _viewRender(view: FullCalendar.View, element: JQuery) {\r\n        view[\"renderId\"] = Math.random();\r\n    }\r\n\r\n    private _createFilteredCallback(original: (event: FullCalendar.EventObject, element: JQuery, view: FullCalendar.View) => any, filter: (event: FullCalendar.EventObject) => boolean): Function {\r\n        return (event: FullCalendar.EventObject, element: JQuery, view: FullCalendar.View) => {\r\n            if (filter(event)) {\r\n                return original(event, element, view);\r\n            }\r\n        };\r\n    }\r\n\r\n    private _createEventSource(source: Calendar_Contracts.IEventSource, options: FullCalendar.EventSourceOptions): CalendarEventSource {\r\n        var state: CalendarEventSourceState = {};\r\n\r\n        var getEventsMethod = (start: moment.Moment, end: moment.Moment, timezone: string|boolean, callback: (events: FullCalendar.EventSource) => void) => {\r\n\r\n            if (!state.dirty && state.cachedEvents) {\r\n                callback(state.cachedEvents);\r\n                return;\r\n            }\r\n            var getEventsPromise = <Q.Promise<Calendar_Contracts.CalendarEvent[]>> source.getEvents();\r\n            Q.timeout(getEventsPromise, 2000, \"Could not load event source \" + source.name + \". Request timed out.\")\r\n                .then(\r\n                (results) => {\r\n                    var calendarEvents = results.map((value, index) => {\r\n                        var end = value.endDate ? Utils_Date.addDays(new Date(value.endDate.valueOf()), 1) : value.startDate;\r\n                        var event: any = {\r\n                            id: value.eventId || Calendar_Utils_Guid.newGuid(),\r\n                            title: value.title,\r\n                            allDay: true,\r\n                            start: value.startDate,\r\n                            end: end,\r\n                            eventType: source.id,\r\n                            rendering: options.rendering || '',\r\n                            category: value.category,\r\n                            member: value.member\r\n                        };\r\n\r\n                        if ($.isFunction(source.addEvents)) {\r\n                            var color = Calendar_ColorUtils.generateColor((<string>event.category || \"uncategorized\").toLowerCase());\r\n                            event.backgroundColor = color;\r\n                            event.borderColor = color;\r\n                        }\r\n\r\n                        if (options.rendering === \"background\" && value.category) {\r\n                            var color = Calendar_ColorUtils.generateBackgroundColor((<string>event.category || \"uncategorized\").toLowerCase());\r\n                            event.backgroundColor = color;\r\n                            event.borderColor = color;\r\n                        }\r\n\r\n                        return event;\r\n                    });\r\n\r\n                    state.dirty = false;\r\n                    state.cachedEvents = calendarEvents;\r\n                    callback(calendarEvents);\r\n\r\n                },(reason) => {\r\n                    console.error(Utils_String.format(\"Error getting event data.\\nEvent source: {0}\\nReason: {1}\", source.name, reason));\r\n                    callback([]);\r\n                });\r\n        };\r\n\r\n        var calendarEventSource: CalendarEventSource = <any>getEventsMethod;\r\n        calendarEventSource.eventSource = source;\r\n        calendarEventSource.state = state;\r\n\r\n        return calendarEventSource;\r\n    }\r\n\r\n    public addCallback(callbackType: FullCalendarCallbackType, callback: Function) {\r\n        if (!this._callbacks[callbackType]) {\r\n            this._callbacks[callbackType] = [];\r\n        }\r\n        this._callbacks[callbackType].push(callback);\r\n    }\r\n\r\n    private _getComposedCallback(callbackType: FullCalendarCallbackType) {\r\n        var args = arguments;\r\n        return (event: FullCalendar.EventObject, element: JQuery, view: FullCalendar.View): JQuery | boolean => {\r\n            var fns = this._callbacks[callbackType];\r\n            if (!fns) {\r\n                return undefined;\r\n            }\r\n            var broken = false;\r\n            var updatedElement = element;\r\n            for (var i = 0; i < fns.length; ++i) {\r\n                var fn = fns[i];\r\n\r\n                var result = fn(event, updatedElement, view);\r\n                if (callbackType === FullCalendarCallbackType.eventRender && result === false) {\r\n                    broken = true;\r\n                    break;\r\n                }\r\n                if (callbackType === FullCalendarCallbackType.eventRender && result instanceof jQuery) {\r\n                    updatedElement = result;\r\n                }\r\n            }\r\n            if (broken) {\r\n                return false;\r\n            }\r\n            return updatedElement;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Adds a one-off event directly to the calendar. Consider adding directly to an event \r\n     * source rather than calling this method.\r\n     * @param FullCalendar.EventObject[] Array of events to add.\r\n     */\r\n    public addEvents(events: FullCalendar.EventObject[]) {\r\n        events.forEach((event) => {\r\n            this._element.fullCalendar(\"renderEvent\", event, true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Remove events from the calendar\r\n     * @param Array of event IDs to remove, or a filter function, accepting an event, returing true if it is to be removed, false if it is to be kept. Leave null to remove all events.\r\n     * @return EventObject[] - events that were removed.\r\n     */\r\n    public removeEvents(filter: any[]|((event: FullCalendar.EventObject) => boolean)): FullCalendar.EventObject[] {\r\n        var clientEvents = this._element.fullCalendar(\"clientEvents\", filter);\r\n        this._element.fullCalendar(\"removeEvents\", filter);\r\n        return clientEvents;\r\n    }\r\n\r\n    /**\r\n     * Gets the current date of the calendar\r\n     @ return Date\r\n     */\r\n    public getDate(): Date {\r\n        return (<moment.Moment><any>this._element.fullCalendar(\"getDate\")).toDate();\r\n    }\r\n}"],"sourceRoot":"/source/"}