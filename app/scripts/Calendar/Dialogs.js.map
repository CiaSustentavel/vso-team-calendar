{"version":3,"sources":["Calendar/Dialogs.ts"],"names":["EditEventDialog","EditEventDialog.constructor","EditEventDialog.initializeOptions","EditEventDialog.initialize","EditEventDialog.getTitle","EditEventDialog.onOkClick","EditEventDialog._buildCalendarEventFromFields","EditEventDialog._createLayout","EditEventDialog._setupValidators","EditEventDialog._getFormFields","EditEventDialog._validate","EditEventDialog._formatDateValue","EditEventDialog._parseDateValue","EditEventDialog._setError","EditEventDialog._clearError","EditFreeFormEventDialog","EditFreeFormEventDialog.constructor","EditFreeFormEventDialog.initialize","EditFreeFormEventDialog._buildCalendarEventFromFields","EditFreeFormEventDialog._createLayout","EditFreeFormEventDialog._getFormFields","EditFreeFormEventDialog._validate","EditCapacityEventDialog","EditCapacityEventDialog.constructor","EditCapacityEventDialog.initialize","EditCapacityEventDialog._buildCalendarEventFromFields","EditCapacityEventDialog._createLayout","EditCapacityEventDialog._getFormFields","EditCapacityEventDialog._validate","DateRelativeToValidator","DateRelativeToValidator.constructor","DateRelativeToValidator.initializeOptions","DateRelativeToValidator.isValid","DateRelativeToValidator.getMessage"],"mappings":"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","file":"Calendar/Dialogs.js","sourcesContent":["/// <reference path='../ref/VSS/VSS.d.ts' />\r\n\r\nimport Calendar_Contracts = require(\"Calendar/Contracts\");\r\nimport Controls = require(\"VSS/Controls\");\r\nimport Controls_Common = require(\"VSS/Controls/Common\");\r\nimport Controls_Validation = require(\"VSS/Controls/Validation\");\r\nimport Utils_Core = require(\"VSS/Utils/Core\");\r\nimport Utils_Date = require(\"VSS/Utils/Date\");\r\nimport Utils_UI = require(\"VSS/Utils/UI\");\r\nimport WebApi_Contracts = require(\"VSS/WebApi/Contracts\");\r\n\r\nvar domElem = Utils_UI.domElem;\r\n\r\n/**\r\n * Base class for a dialog which allows users to add a new event or edit an existing one\r\n*/\r\nexport class EditEventDialog extends Controls_Common.ModalDialog {\r\n    private _$container: JQuery;\r\n    protected _$startInput: JQuery;\r\n    protected _$endInput: JQuery;\r\n\r\n\r\n    private _eventValidationError: Controls_Common.MessageAreaControl;\r\n    protected _calendarEvent: Calendar_Contracts.CalendarEvent;\r\n\r\n    public initializeOptions(options?: any) {\r\n        super.initializeOptions($.extend(options, { \"height\": 250 }));\r\n    }\r\n\r\n    public initialize() {\r\n        this._calendarEvent = this._options.event;\r\n        this._createLayout();\r\n        super.initialize();\r\n    }\r\n\r\n    /**\r\n     * Returns the title of the dialog\r\n     */\r\n    public getTitle(): string {\r\n        return this._options.title;\r\n    }\r\n\r\n    /**\r\n     * Processes the data that the user has entered and either\r\n     * shows an error message, or returns the edited note.\r\n     */\r\n    public onOkClick(): any {\r\n        this._calendarEvent.startDate = this._parseDateValue(this._$startInput.val());\r\n        this._calendarEvent.endDate = this._parseDateValue(this._$endInput.val());\r\n\r\n        this._buildCalendarEventFromFields();\r\n\r\n        this.processResult(this._calendarEvent);\r\n    }\r\n\r\n    protected _buildCalendarEventFromFields() {\r\n    }\r\n\r\n    protected _createLayout() {\r\n        this._$container = $(domElem('div')).addClass('edit-event-container').appendTo(this._element);\r\n\r\n        this._eventValidationError = <Controls_Common.MessageAreaControl>Controls.BaseControl.createIn(Controls_Common.MessageAreaControl, this._$container, { closeable: false });\r\n\r\n        var $editControl = $(domElem('div', 'event-edit-control'));\r\n        var $fieldsContainer = $(domElem('table')).appendTo($editControl);\r\n\r\n        this._$startInput = $(\"<input type='text' id='fieldStartDate' />\").val(this._formatDateValue(this._calendarEvent.startDate))\r\n            .on(\"blur\",(e) => {\r\n                this.updateOkButton(this._validate());\r\n        });\r\n        this._$endInput = $(\"<input type='text' id='fieldEndDate' />\")\r\n            .on(\"blur\",(e) => {\r\n                this.updateOkButton(this._validate());\r\n            });\r\n\r\n        if (this._calendarEvent.endDate) {\r\n            this._$endInput.val(this._formatDateValue(this._calendarEvent.endDate));\r\n        }\r\n        else {\r\n            this._$endInput.val(this._formatDateValue(this._calendarEvent.startDate));\r\n        }\r\n\r\n        // Populate fields container with fields. The form fields array contain pairs of field label and field element itself.\r\n        var fields = this._getFormFields();\r\n        for (var i = 0, l = fields.length; i < l; i += 1) {\r\n            var labelName = fields[i][0];\r\n            var field = fields[i][1];\r\n\r\n            var $row = $(domElem(\"tr\"));\r\n\r\n            var fieldId = field.attr(\"id\") || $(\"input\", field).attr(\"id\");\r\n            $(domElem(\"label\")).attr(\"for\", fieldId).text(labelName).appendTo($(domElem(\"td\", \"label\")).appendTo($row));\r\n\r\n            field.appendTo($(domElem(\"td\"))\r\n                .appendTo($row));\r\n\r\n            $row.appendTo($fieldsContainer);\r\n        }\r\n\r\n        this._$container.append($editControl);\r\n\r\n        var startCombo = <Controls_Common.Combo>Controls.Enhancement.enhance(Controls_Common.Combo, this._$startInput, {\r\n            type: \"date-time\"\r\n        });\r\n        var endCombo = <Controls_Common.Combo>Controls.Enhancement.enhance(Controls_Common.Combo, this._$endInput, {\r\n            type: \"date-time\"\r\n        });\r\n\r\n        this._setupValidators(this._$startInput, \"Start date must be a valid date\");\r\n        this._setupValidators(this._$endInput, \"End date must be a valid date\", \"End date must be equal to or after start date\", this._$startInput, DateComparisonOptions.GREATER_OR_EQUAL);\r\n    }\r\n\r\n    private _setupValidators($field: JQuery, validDateFormatMessage: string, relativeToErrorMessage?: string, $relativeToField?: JQuery, dateComparisonOptions?: DateComparisonOptions) {\r\n        <Controls_Validation.DateValidator<Controls_Validation.DateValidatorOptions>>Controls.Enhancement.enhance(Controls_Validation.DateValidator, $field, {\r\n            invalidCssClass: \"date-invalid\",\r\n            group: \"default\",\r\n            message: validDateFormatMessage\r\n        });\r\n\r\n        if (relativeToErrorMessage) {\r\n            <DateRelativeToValidator>Controls.Enhancement.enhance(DateRelativeToValidator, $field, {\r\n                comparison: dateComparisonOptions,\r\n                relativeToField: $relativeToField,\r\n                group: \"default\",\r\n                message: relativeToErrorMessage\r\n            });\r\n        }\r\n    }\r\n\r\n    protected _getFormFields(): any[] {\r\n        var fields = [];\r\n\r\n        return fields;\r\n    }\r\n\r\n    protected _validate(): boolean {\r\n        return true;\r\n    }\r\n\r\n    private _formatDateValue(date: Date): string {\r\n        return date === null ? \"\" : Utils_Date.format(new Date(date.valueOf()), \"d\");\r\n    }\r\n\r\n    private _parseDateValue(date: string): Date {\r\n        return date === null ? null : Utils_Date.parseDateString(date, \"d\", true);\r\n    }\r\n\r\n    protected _setError(errorMessage: string) {\r\n        this._eventValidationError.setError($(\"<span />\").html(errorMessage));\r\n    }\r\n\r\n    protected _clearError() {\r\n        this._eventValidationError.clear();\r\n    }\r\n}\r\n\r\n/**\r\n * A dialog which allows users to add / edit free-form events.\r\n * In addition to start/end dates, allows user to enter a title and select a category.\r\n*/\r\nexport class EditFreeFormEventDialog extends EditEventDialog {\r\n    private _$titleInput: JQuery;\r\n    private _$categoryInput: JQuery;\r\n\r\n    public initialize() {\r\n        super.initialize();\r\n\r\n        if (this._calendarEvent.title) {\r\n            this._$titleInput.val(this._calendarEvent.title);\r\n            this.updateOkButton(true);\r\n        }\r\n\r\n        this._$categoryInput.val(this._calendarEvent.category || \"\");\r\n    }\r\n\r\n    protected _buildCalendarEventFromFields() {\r\n        this._calendarEvent.title = $.trim(this._$titleInput.val());\r\n        this._calendarEvent.category = $.trim(this._$categoryInput.val());\r\n    }\r\n\r\n    protected _createLayout() {\r\n        this._$titleInput = $(\"<input type='text' class='requiredInfoLight' id='fieldTitle'/>\")\r\n            .on(\"input keyup\",(e) => {\r\n            if (e.keyCode !== Utils_UI.KeyCode.ENTER) {\r\n                this.updateOkButton(this._validate());\r\n            }\r\n        });\r\n\r\n        this._$categoryInput = $(\"<input type='text' id='fieldCategory' />\");\r\n\r\n        // Populate categories\r\n        var categories = <IPromise<string[]>>this._options.categories;\r\n        if (categories) {\r\n            categories.then((allCategories: string[]) => {\r\n                Controls.Enhancement.enhance(Controls_Common.Combo, this._$categoryInput, {\r\n                    source: allCategories,\r\n                    dropCount: 3\r\n                });\r\n            });\r\n        }\r\n\r\n        super._createLayout();\r\n    }\r\n\r\n    protected _getFormFields(): any[] {\r\n        var fields = [];\r\n\r\n        fields.push([\"Title\", this._$titleInput]);\r\n        fields.push([\"Start Date\", this._$startInput]);\r\n        fields.push([\"End Date\", this._$endInput]);\r\n        fields.push([\"Category\", this._$categoryInput]);\r\n\r\n        return fields;\r\n    }\r\n\r\n    protected _validate(): boolean {\r\n        var title: string = $.trim(this._$titleInput.val());\r\n        if (title.length <= 0) {\r\n            this._clearError();\r\n            return false;\r\n        }\r\n        var validationResult = [];\r\n        var isValid: boolean = Controls_Validation.validateGroup('default', validationResult);\r\n        if (!isValid) {\r\n            this._setError(validationResult[0].getMessage());\r\n            return false;\r\n        }\r\n\r\n        this._clearError();\r\n        return true;\r\n    }\r\n}\r\n\r\n/**\r\n * A dialog which allows users to add / edit days off events.\r\n * In addition to start/end dates, allows user to select a user (or the entire team).\r\n*/\r\nexport class EditCapacityEventDialog extends EditEventDialog {\r\n    private _$memberInput: JQuery;\r\n    private _members: WebApi_Contracts.IdentityRef[];\r\n    private static EVERYONE : string = \"Everyone\";\r\n\r\n    public initialize() {\r\n        super.initialize();\r\n        this._$memberInput.val(this._calendarEvent.member.displayName || \"\");\r\n        if (this._options.isEdit) {\r\n            this._$memberInput.addClass('requiredInfoLight');\r\n            this._$memberInput.prop('disabled', true);\r\n        }\r\n        this.updateOkButton(true);\r\n    }\r\n\r\n    protected _buildCalendarEventFromFields() {        \r\n        if (this._members) {\r\n            var displayName = $.trim(this._$memberInput.val());\r\n            var eventMember : any;\r\n            if (displayName === EditCapacityEventDialog.EVERYONE) {\r\n                this._calendarEvent.member.displayName = displayName;\r\n            }\r\n            else {\r\n                this._members.some((member: WebApi_Contracts.IdentityRef, index: number, array: WebApi_Contracts.IdentityRef[]) => {\r\n                    if (member.displayName === displayName) {\r\n                        eventMember = member;\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                });\r\n                this._calendarEvent.member = eventMember;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected _createLayout() {\r\n        this._$memberInput = $(\"<input type='text' id='fieldMember' />\");\r\n\r\n        if (this._options.membersPromise) {\r\n            this._options.membersPromise.then((members: WebApi_Contracts.IdentityRef[]) => {\r\n                this._members = members;\r\n                var memberNames = [];\r\n                memberNames.push(EditCapacityEventDialog.EVERYONE);\r\n                members.sort((a, b) => { return a.displayName.toLocaleLowerCase().localeCompare(b.displayName.toLocaleLowerCase()); });\r\n                members.forEach((member: WebApi_Contracts.IdentityRef, index: number, array: WebApi_Contracts.IdentityRef[]) => {\r\n                    memberNames.push(member.displayName);\r\n                });\r\n\r\n                super._createLayout();\r\n\r\n                Controls.Enhancement.enhance(Controls_Common.Combo, this._$memberInput, {\r\n                    source: memberNames,\r\n                    dropCount: 3\r\n                });\r\n            });\r\n        }\r\n        else {\r\n            super._createLayout();\r\n            this._$memberInput.prop('disabled', true);\r\n        }\r\n    }\r\n\r\n    protected _getFormFields(): any[] {\r\n        var fields = [];\r\n\r\n        fields.push([\"Start Date\", this._$startInput]);\r\n        fields.push([\"End Date\", this._$endInput]);\r\n        fields.push([\"Team Member\", this._$memberInput]);\r\n\r\n        return fields;\r\n    }\r\n\r\n    protected _validate(): boolean {\r\n        var validationResult = [];\r\n        var isValid: boolean = Controls_Validation.validateGroup('default', validationResult);\r\n        if (!isValid) {\r\n            this._setError(validationResult[0].getMessage());\r\n            return false;\r\n        }\r\n\r\n        this._clearError();\r\n        return true;\r\n    }\r\n}\r\n\r\ninterface DateRelativeToValidatorOptions extends Controls_Validation.BaseValidatorOptions {\r\n    relativeToField: any;\r\n    comparison: DateComparisonOptions;\r\n    message: string;\r\n    group: string;\r\n    parseFormat?: string;\r\n}\r\n\r\nconst enum DateComparisonOptions {\r\n    GREATER_OR_EQUAL,\r\n    LESS_OR_EQUAL\r\n}\r\n\r\nclass DateRelativeToValidator extends Controls_Validation.BaseValidator<DateRelativeToValidatorOptions> {\r\n\r\n    constructor(options?: DateRelativeToValidatorOptions) {\r\n        super(options);\r\n    }\r\n\r\n    public initializeOptions(options?: DateRelativeToValidatorOptions) {\r\n        super.initializeOptions(<DateRelativeToValidatorOptions>$.extend({\r\n            invalidCssClass: \"date-relative-to-invalid\",\r\n        }, options));\r\n    }\r\n\r\n    public isValid(): boolean {\r\n        var fieldText = $.trim(this.getValue()),\r\n            relativeToFieldText = $.trim(this._options.relativeToField.val()),\r\n            fieldDate,\r\n            relativeToFieldDate,\r\n            result = false;\r\n\r\n        if (fieldText && relativeToFieldText) {\r\n            fieldDate = Utils_Date.parseDateString(fieldText, this._options.parseFormat, true);\r\n            relativeToFieldDate = Utils_Date.parseDateString(relativeToFieldText, this._options.parseFormat, true);\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n\r\n        if ((fieldDate instanceof Date) && !isNaN(fieldDate) && relativeToFieldDate instanceof Date && !isNaN(relativeToFieldDate)) {\r\n            if (this._options.comparison === DateComparisonOptions.GREATER_OR_EQUAL) {\r\n                result = fieldDate >= relativeToFieldDate;\r\n            }\r\n            else {\r\n                result = fieldDate <= relativeToFieldDate;\r\n            }\r\n        }\r\n        else {\r\n            result = true;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getMessage() {\r\n        return this._options.message;\r\n    }\r\n}"],"sourceRoot":"/source/"}